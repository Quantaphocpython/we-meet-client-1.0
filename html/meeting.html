<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Room</title>
    <link rel="stylesheet" href="../css/room.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link
      rel="stylesheet"
      href="/node_modules/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"
      integrity="sha512-iKDtgDyTHjAitUDdLljGhenhPwrbBfqTKWO1mkhSFH3A7blITC9MhYon6SjnMhp4o0rADGw9yAC6EW4t5a4K3g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"
      integrity="sha512-1QvjE7BtotQjkq8PxLeF6P46gEpBRXuskzIVgjFpekzFVF4yjRgrQvTG1MTOJ3yQgvTteKAcO7DSZI92+u/yZw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Poppins"
    />
  </head>
  <body>
    <div class="container">
      <div class="participant" id="participant">
        <div class="user" id="localId">
          <i class="bi bi-person-fill user-thumbnail"></i>
          <p class="user-name"></p>
          <video class="video" id="localVideo" autoplay muted></video>
        </div>
      </div>

      <div class="control">
        <div class="left">
          <span id="current-time"></span>
          <span style="display: inline-block; padding: 0 5px">|</span>
          <span id="roomId"></span>
        </div>
        <div class="center">
          <button class="icon-btn" id="muteButton">
            <i class="bi bi-mic-fill"></i>
          </button>
          <button class="icon-btn" id="videoButton">
            <i class="bi bi-camera-video-fill"></i>
          </button>
          <button class="icon-btn"><i class="bi bi-aspect-ratio"></i></button>
          <button class="icon-btn"><i class="bi bi-emoji-smile"></i></button>
          <button class="icon-btn"><i class="bi bi-upload"></i></button>
          <button class="icon-btn"><i class="bi bi-hand-thumbs-up"></i></button>
          <button class="icon-btn"><i class="bi bi-three-dots"></i></button>
          <button class="icon-btn end-call" id="outButton">
            <i class="bi bi-telephone-x-fill"></i>
          </button>
        </div>

        <div class="right" style="gap: 2px">
          <button class="icon-btn non-bg">
            <i class="bi bi-info-circle"></i>
          </button>
          <button class="icon-btn non-bg"><i class="bi bi-people"></i></button>
          <button class="icon-btn non-bg">
            <i class="bi bi-chat-dots"></i>
          </button>
          <button class="icon-btn non-bg"><i class="bi bi-geo-alt"></i></button>
          <button class="icon-btn non-bg"><i class="bi bi-lock"></i></button>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      function updateTime() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        document.getElementById('current-time').textContent =
          `${hours}:${minutes}`;
      }

      function getRoomId() {
        const urlParams = new URLSearchParams(window.location.search);
        const roomId = urlParams.get('roomId');

        document.getElementById('roomId').textContent = roomId;
      }

      getRoomId();
      setInterval(updateTime, 1000);
      updateTime();
    </script>
    <script type="module" src="../js/meeting.js"></script>
  </body>
</html>
